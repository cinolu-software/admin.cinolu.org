@let p = participation();
@let id = participationId();
<div class="px-4 sm:px-6 py-5 space-y-4 max-h-[500px] overflow-y-auto">
  <div class="rounded-lg bg-white p-4 border border-gray-100">
    <h4 [id]="'detail-user-heading-' + id" class="text-xs font-semibold text-gray-500 mb-3 tracking-wide uppercase">
      Participant
    </h4>
    <div class="flex flex-col sm:flex-row sm:items-start gap-3">
      <app-ui-avatar
        [shape]="'circle'"
        [image]="p.user | apiIMG: 'user'"
        [label]="p.user.name"
        class="shrink-0 size-12" />
      <div class="min-w-0 flex-1 space-y-2">
        <div>
          <p class="font-semibold text-gray-900 text-sm">{{ p.user.name }}</p>
        </div>
        @if (p.user.email) {
          <div class="text-xs text-gray-600">
            <a
              [href]="'mailto:' + p.user.email"
              class="text-primary-600 hover:text-primary-700 transition-colors break-all">
              {{ p.user.email }}
            </a>
          </div>
        }
        @if (p.user.phone_number) {
          <p class="text-xs text-gray-600">
            {{ p.user.phone_number }}
          </p>
        }
        @if (p.user.city || p.user.country) {
          <p class="text-xs text-gray-600">
            {{ p.user.city }}{{ p.user.city && p.user.country ? ', ' : '' }}{{ p.user.country }}
          </p>
        }
        @if (p.user.biography) {
          <p class="text-xs text-gray-600 mt-2 leading-relaxed line-clamp-2">{{ p.user.biography }}</p>
        }
      </div>
    </div>
  </div>
  @if (p.venture) {
    <div class="rounded-lg bg-white p-4 border border-gray-100">
      <h4
        [id]="'detail-venture-heading-' + id"
        class="text-xs font-semibold text-gray-500 mb-3 tracking-wide uppercase">
        Projet
      </h4>
      <div class="flex flex-col sm:flex-row sm:items-start gap-3">
        <app-ui-avatar
          [shape]="'square'"
          [image]="p.venture | apiIMG: 'venture'"
          [label]="p.venture.name"
          class="shrink-0 size-12 rounded-lg" />
        <div class="min-w-0 flex-1 space-y-2">
          <p class="font-semibold text-gray-900 text-sm">{{ p.venture.name }}</p>
          @if (p.venture.description) {
            <p class="text-xs text-gray-600 leading-relaxed line-clamp-2">{{ p.venture.description }}</p>
          }
          @if (p.venture.sector) {
            <p class="text-xs text-gray-600">
              {{ p.venture.sector }}
            </p>
          }
          @if (p.venture.stage) {
            <p class="text-xs text-gray-600">
              {{ p.venture.stage }}
            </p>
          }
          @if (p.venture.email) {
            <p class="text-xs text-gray-600">
              <a
                [href]="'mailto:' + p.venture.email"
                class="text-primary-600 hover:text-primary-700 transition-colors break-all">
                {{ p.venture.email }}
              </a>
            </p>
          }
          @if (p.venture.website) {
            <p class="text-xs text-gray-600">
              <a
                [href]="p.venture.website"
                target="_blank"
                rel="noopener noreferrer"
                class="text-primary-600 hover:text-primary-700 transition-colors truncate block">
                {{ p.venture.website }}
              </a>
            </p>
          }
        </div>
      </div>
    </div>
  } @else {
    <div class="rounded-lg bg-gray-50 p-4 border border-gray-100">
      <h4
        [id]="'detail-venture-heading-' + id"
        class="text-xs font-semibold text-gray-500 mb-2 tracking-wide uppercase">
        Projet
      </h4>
      <p class="text-xs text-gray-400 italic">Aucun projet associÃ©</p>
    </div>
  }
  @if (p.phases.length) {
    <div class="rounded-lg bg-white p-4 border border-gray-100">
      <h4 [id]="'detail-phases-heading-' + id" class="text-xs font-semibold text-gray-500 mb-3 tracking-wide uppercase">
        Phases
      </h4>
      <div class="flex flex-wrap gap-2">
        @for (ph of p.phases; track ph.id) {
          <app-ui-badge [label]="ph.name" variant="info" />
        }
      </div>
    </div>
  }
</div>
